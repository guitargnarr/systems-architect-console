<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Systems Architect Console - Multi-Model Analysis</title>
  <meta name="description" content="Query 19 specialized AI models for holistic, multi-perspective analysis on any problem">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0fdfa', 100: '#ccfbf1', 200: '#99f6e4', 300: '#5eead4',
              400: '#2dd4bf', 500: '#14b8a6', 600: '#0d9488', 700: '#0f766e',
              800: '#115e59', 900: '#134e4a',
            },
            secondary: {
              50: '#fff7ed', 100: '#ffedd5', 200: '#fed7aa', 300: '#fdba74',
              400: '#fb923c', 500: '#f97316', 600: '#ea580c', 700: '#c2410c',
              800: '#9a3412', 900: '#7c2d12',
            },
          },
        },
      },
    }
  </script>
  <style>
    body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); min-height: 100vh; }
    .card { background: #1e293b; border-radius: 1rem; border: 1px solid #334155; padding: 1.5rem; }
    .input-field { width: 100%; padding: 0.75rem 1rem; background: #334155; border: 1px solid #475569; border-radius: 0.5rem; color: #f1f5f9; outline: none; }
    .input-field:focus { border-color: #14b8a6; box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.2); }
    .input-field::placeholder { color: #94a3b8; }
    .btn-primary { background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.5rem; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer; transition: all 0.2s; border: none; }
    .btn-primary:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
    .model-chip { padding: 0.375rem 0.75rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s; }
    .model-chip-inactive { background: #334155; color: #cbd5e1; }
    .model-chip-inactive:hover { background: #475569; }
    .response-card { background: rgba(30, 41, 59, 0.5); backdrop-filter: blur(8px); border-radius: 0.75rem; border: 1px solid #334155; padding: 1.25rem; }
    .prose-response { color: #cbd5e1; line-height: 1.625; white-space: pre-wrap; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #1e293b; }
    ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #64748b; }
  </style>
</head>
<body class="text-slate-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useCallback } = React;

    // SVG Icons as components
    const Icons = {
      Brain: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/><path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/><path d="M3.477 10.896a4 4 0 0 1 .585-.396"/><path d="M19.938 10.5a4 4 0 0 1 .585.396"/><path d="M6 18a4 4 0 0 1-1.967-.516"/><path d="M19.967 17.484A4 4 0 0 1 18 18"/></svg>,
      Send: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>,
      Loader: () => <svg className="animate-spin" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
      Check: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>,
      X: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>,
      Clock: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      ChevronDown: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6"/></svg>,
      ChevronUp: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m18 15-6-6-6 6"/></svg>,
      Cpu: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>,
      Dollar: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
      Calculator: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>,
      User: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Wrench: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>,
      Sparkles: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>,
      Zap: () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/></svg>,
      Refresh: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
    };

    // Model definitions
    const MODELS = {
      "unified-systems-architect": { domain: "meta", color: "#f97316", description: "Meta-expert synthesizing all domains", priority: 1 },
      "llm-orchestration-ontology": { domain: "technical", color: "#3b82f6", description: "LLM orchestration patterns, multi-agent systems" },
      "prompt-engineering-expert": { domain: "technical", color: "#3b82f6", description: "Prompting techniques, debugging, optimization" },
      "kg-traversal-expert": { domain: "technical", color: "#3b82f6", description: "Knowledge graph algorithms, SPARQL, Cypher" },
      "app-architecture-expert": { domain: "technical", color: "#3b82f6", description: "Web architecture patterns, SSR, SPA, microservices" },
      "performance-percentiles-expert": { domain: "technical", color: "#3b82f6", description: "p50/p95/p99 metrics, SLOs, error budgets" },
      "wealth-mindset": { domain: "wealth", color: "#22c55e", description: "Wealth thinking, leverage, ownership mindset" },
      "passive-income-expert": { domain: "wealth", color: "#22c55e", description: "Passive income streams, investment strategies" },
      "real-estate-investor": { domain: "wealth", color: "#22c55e", description: "Real estate strategies, BRRRR, financing" },
      "deal-structuring-expert": { domain: "wealth", color: "#22c55e", description: "M&A, acquisitions, deal financing" },
      "business-tax-2026": { domain: "tax", color: "#a855f7", description: "2026 tax laws, OBBBA provisions, compliance" },
      "cpa-wealth-advisor": { domain: "tax", color: "#a855f7", description: "Business owner tax optimization, retirement" },
      "homeowner-tax-strategies": { domain: "tax", color: "#a855f7", description: "Homeowner deductions, 1031 exchanges, depreciation" },
      "ngo-corporate-structures": { domain: "tax", color: "#a855f7", description: "Nonprofit structures, 501c3/c4, beneficial ownership" },
      "skill-stack-expert": { domain: "personal", color: "#ec4899", description: "8 power skill stacks for career acceleration" },
      "skill-stacker": { domain: "personal", color: "#ec4899", description: "Skill development strategy, rare combinations" },
      "productivity-systems-expert": { domain: "personal", color: "#ec4899", description: "Time management, focus systems, GTD" },
      "world-model-expert": { domain: "personal", color: "#ec4899", description: "Mental models, systems thinking, Bayesian reasoning" },
      "english-to-spanish": { domain: "utility", color: "#64748b", description: "English to Spanish translation" }
    };

    const DOMAINS = {
      meta: { label: "Meta", color: "#f97316", Icon: Icons.Sparkles },
      technical: { label: "Technical", color: "#3b82f6", Icon: Icons.Cpu },
      wealth: { label: "Wealth", color: "#22c55e", Icon: Icons.Dollar },
      tax: { label: "Tax/Legal", color: "#a855f7", Icon: Icons.Calculator },
      personal: { label: "Personal", color: "#ec4899", Icon: Icons.User },
      utility: { label: "Utility", color: "#64748b", Icon: Icons.Wrench }
    };

    const EXAMPLE_PROMPTS = [
      "I want to start a SaaS business while keeping my day job. How should I structure this for optimal tax treatment, skill development, and eventual exit?",
      "Compare the trade-offs between building a rental property portfolio vs building a digital product business for passive income.",
      "How do I evaluate whether to take a higher-paying job vs starting my own consulting practice?",
      "Design a system architecture for a high-traffic e-commerce platform with p99 latency under 200ms."
    ];

    // Query a single model directly via Ollama REST API
    async function queryModel(modelName, prompt) {
      const startTime = Date.now();
      const modelInfo = MODELS[modelName] || {};
      try {
        const response = await fetch('http://localhost:11434/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            model: modelName,
            prompt: prompt,
            stream: false
          })
        });
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        const data = await response.json();
        return {
          model: modelName,
          domain: modelInfo.domain || 'unknown',
          color: modelInfo.color || '#64748b',
          description: modelInfo.description || '',
          response: data.response,
          error: null,
          duration_ms: Date.now() - startTime,
          status: 'success'
        };
      } catch (error) {
        return {
          model: modelName,
          domain: modelInfo.domain || 'unknown',
          color: modelInfo.color || '#64748b',
          description: modelInfo.description || '',
          response: null,
          error: error.message,
          duration_ms: Date.now() - startTime,
          status: 'error'
        };
      }
    }

    function App() {
      const [prompt, setPrompt] = useState('');
      const [selectedModels, setSelectedModels] = useState(new Set(Object.keys(MODELS)));
      const [responses, setResponses] = useState([]);
      const [isLoading, setIsLoading] = useState(false);
      const [queryStats, setQueryStats] = useState(null);
      const [expandedResponses, setExpandedResponses] = useState(new Set());
      const [selectedDomains, setSelectedDomains] = useState(new Set(Object.keys(DOMAINS)));

      const toggleModel = useCallback((modelName) => {
        setSelectedModels(prev => {
          const next = new Set(prev);
          if (next.has(modelName)) next.delete(modelName);
          else next.add(modelName);
          return next;
        });
      }, []);

      const toggleDomain = useCallback((domain) => {
        setSelectedDomains(prev => {
          const next = new Set(prev);
          if (next.has(domain)) {
            next.delete(domain);
            Object.entries(MODELS).forEach(([name, info]) => {
              if (info.domain === domain) {
                setSelectedModels(sm => { const n = new Set(sm); n.delete(name); return n; });
              }
            });
          } else {
            next.add(domain);
            Object.entries(MODELS).forEach(([name, info]) => {
              if (info.domain === domain) {
                setSelectedModels(sm => { const n = new Set(sm); n.add(name); return n; });
              }
            });
          }
          return next;
        });
      }, []);

      const selectAll = () => { setSelectedModels(new Set(Object.keys(MODELS))); setSelectedDomains(new Set(Object.keys(DOMAINS))); };
      const selectNone = () => { setSelectedModels(new Set()); setSelectedDomains(new Set()); };

      const toggleResponseExpanded = useCallback((modelName) => {
        setExpandedResponses(prev => {
          const next = new Set(prev);
          if (next.has(modelName)) next.delete(modelName);
          else next.add(modelName);
          return next;
        });
      }, []);

      const handleQuery = async () => {
        if (!prompt.trim() || selectedModels.size === 0) return;

        setIsLoading(true);
        setResponses([]);
        setQueryStats(null);
        setExpandedResponses(new Set());

        const startTime = Date.now();
        const modelsArray = Array.from(selectedModels);

        // Initialize pending states
        const pendingResponses = modelsArray.map(name => ({
          model: name,
          domain: MODELS[name].domain,
          color: MODELS[name].color,
          description: MODELS[name].description,
          response: null,
          error: null,
          duration_ms: 0,
          status: 'pending'
        }));
        setResponses(pendingResponses);

        // Query all models in parallel
        const results = await Promise.all(
          modelsArray.map(name => queryModel(name, prompt.trim()))
        );

        const totalDuration = Date.now() - startTime;
        const succeeded = results.filter(r => r.status === 'success').length;

        setResponses(results);
        setQueryStats({
          total_duration_ms: totalDuration,
          models_succeeded: succeeded,
          models_queried: modelsArray.length
        });
        setExpandedResponses(new Set(results.filter(r => r.status === 'success').map(r => r.model)));
        setIsLoading(false);
      };

      const getDomainIcon = (domain) => DOMAINS[domain]?.Icon || Icons.Brain;
      const formatDuration = (ms) => ms < 1000 ? `${ms}ms` : `${(ms / 1000).toFixed(1)}s`;

      return (
        <div className="min-h-screen">
          {/* Header */}
          <header className="border-b border-slate-700 bg-slate-900/80 backdrop-blur sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-4 py-4">
              <div className="flex items-center gap-3">
                <div className="p-2 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl">
                  <Icons.Brain />
                </div>
                <div>
                  <h1 className="text-2xl font-bold text-white">Systems Architect Console</h1>
                  <p className="text-sm text-slate-400">Multi-model holistic analysis across 19 specialized domains</p>
                </div>
              </div>
            </div>
          </header>

          <main className="max-w-7xl mx-auto px-4 py-8">
            {/* Query Input Section */}
            <div className="card mb-8">
              <div className="mb-4">
                <label className="block text-sm font-medium text-slate-300 mb-2">Your Question or Scenario</label>
                <textarea
                  value={prompt}
                  onChange={(e) => setPrompt(e.target.value)}
                  placeholder="Describe your situation or question for multi-perspective analysis..."
                  className="input-field min-h-[120px] resize-y"
                  disabled={isLoading}
                />
              </div>

              {/* Example Prompts */}
              <div className="mb-6">
                <p className="text-xs text-slate-500 mb-2">Try an example:</p>
                <div className="flex flex-wrap gap-2">
                  {EXAMPLE_PROMPTS.map((ex, i) => (
                    <button
                      key={i}
                      onClick={() => setPrompt(ex)}
                      className="text-xs px-3 py-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-full text-slate-300 transition-colors truncate max-w-xs"
                      disabled={isLoading}
                    >
                      {ex.slice(0, 60)}...
                    </button>
                  ))}
                </div>
              </div>

              {/* Domain Selection */}
              <div className="mb-4">
                <div className="flex items-center justify-between mb-2">
                  <label className="text-sm font-medium text-slate-300">Select Domains</label>
                  <div className="flex gap-2">
                    <button onClick={selectAll} className="text-xs text-primary-400 hover:text-primary-300">Select All</button>
                    <span className="text-slate-600">|</span>
                    <button onClick={selectNone} className="text-xs text-slate-400 hover:text-slate-300">Clear</button>
                  </div>
                </div>
                <div className="flex flex-wrap gap-2">
                  {Object.entries(DOMAINS).map(([key, domain]) => {
                    const Icon = domain.Icon;
                    const isSelected = selectedDomains.has(key);
                    const modelCount = Object.values(MODELS).filter(m => m.domain === key).length;
                    const selectedCount = Object.entries(MODELS).filter(([name, m]) => m.domain === key && selectedModels.has(name)).length;

                    return (
                      <button
                        key={key}
                        onClick={() => toggleDomain(key)}
                        className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${
                          isSelected ? 'text-white shadow-lg' : 'bg-slate-700/50 text-slate-400 hover:bg-slate-600/50'
                        }`}
                        style={isSelected ? { backgroundColor: domain.color } : undefined}
                      >
                        <Icon />
                        <span className="font-medium">{domain.label}</span>
                        <span className={`text-xs ${isSelected ? 'text-white/70' : 'text-slate-500'}`}>
                          {selectedCount}/{modelCount}
                        </span>
                      </button>
                    );
                  })}
                </div>
              </div>

              {/* Model Selection */}
              <div className="mb-6">
                <label className="block text-sm font-medium text-slate-300 mb-2">
                  Models ({selectedModels.size} selected)
                </label>
                <div className="flex flex-wrap gap-2 max-h-48 overflow-y-auto p-2 bg-slate-900/50 rounded-lg">
                  {Object.entries(MODELS).map(([name, info]) => (
                    <button
                      key={name}
                      onClick={() => toggleModel(name)}
                      className={`model-chip flex items-center gap-1.5 ${
                        selectedModels.has(name) ? '' : 'model-chip-inactive'
                      }`}
                      style={selectedModels.has(name) ? { backgroundColor: info.color, color: 'white' } : undefined}
                      title={info.description}
                    >
                      {info.priority === 1 && <Icons.Zap />}
                      {name.replace(/-/g, ' ')}
                    </button>
                  ))}
                </div>
              </div>

              {/* Submit Button */}
              <button
                onClick={handleQuery}
                disabled={isLoading || !prompt.trim() || selectedModels.size === 0}
                className="btn-primary w-full"
              >
                {isLoading ? (
                  <><Icons.Loader /> Querying {selectedModels.size} models...</>
                ) : (
                  <><Icons.Send /> Analyze with {selectedModels.size} Models</>
                )}
              </button>
            </div>

            {/* Results Stats */}
            {queryStats && (
              <div className="flex flex-wrap items-center gap-4 mb-6 p-4 bg-slate-800/50 rounded-xl border border-slate-700">
                <div className="flex items-center gap-2">
                  <Icons.Clock />
                  <span className="text-slate-300">Total: {formatDuration(queryStats.total_duration_ms)}</span>
                </div>
                <div className="flex items-center gap-2 text-green-400">
                  <Icons.Check />
                  <span className="text-slate-300">{queryStats.models_succeeded}/{queryStats.models_queried} succeeded</span>
                </div>
                <button
                  onClick={() => { setResponses([]); setQueryStats(null); }}
                  className="ml-auto flex items-center gap-1 text-sm text-slate-400 hover:text-slate-300"
                >
                  <Icons.Refresh /> Clear Results
                </button>
              </div>
            )}

            {/* Responses Grid */}
            {responses.length > 0 && (
              <div className="space-y-4">
                {responses.map((resp) => {
                  const Icon = getDomainIcon(resp.domain);
                  const isExpanded = expandedResponses.has(resp.model);

                  return (
                    <div key={resp.model} className={`response-card ${resp.status === 'pending' ? 'animate-pulse' : ''}`}>
                      {/* Header */}
                      <div
                        className="flex items-center justify-between cursor-pointer"
                        onClick={() => resp.status === 'success' && toggleResponseExpanded(resp.model)}
                      >
                        <div className="flex items-center gap-3">
                          <div className="p-2 rounded-lg" style={{ backgroundColor: `${resp.color}20` }}>
                            <span style={{ color: resp.color }}><Icon /></span>
                          </div>
                          <div>
                            <h3 className="font-semibold text-white flex items-center gap-2">
                              {resp.model.replace(/-/g, ' ')}
                              {MODELS[resp.model]?.priority === 1 && (
                                <span className="text-xs bg-secondary-500/20 text-secondary-400 px-2 py-0.5 rounded">META</span>
                              )}
                            </h3>
                            <p className="text-xs text-slate-400">{resp.description}</p>
                          </div>
                        </div>
                        <div className="flex items-center gap-3">
                          {resp.status === 'pending' && <span className="text-slate-400"><Icons.Loader /></span>}
                          {resp.status === 'success' && (
                            <>
                              <span className="text-xs text-slate-500">{formatDuration(resp.duration_ms)}</span>
                              <span className="text-green-400"><Icons.Check /></span>
                              {isExpanded ? <Icons.ChevronUp /> : <Icons.ChevronDown />}
                            </>
                          )}
                          {resp.status === 'error' && <span className="text-red-400"><Icons.X /></span>}
                          {resp.status === 'timeout' && <span className="text-yellow-400"><Icons.Clock /></span>}
                        </div>
                      </div>

                      {/* Content */}
                      {isExpanded && resp.response && (
                        <div className="mt-4 pt-4 border-t border-slate-700">
                          <div className="prose-response">{resp.response}</div>
                        </div>
                      )}

                      {/* Error Message */}
                      {resp.error && (
                        <div className="mt-3 p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
                          <p className="text-sm text-red-400">{resp.error}</p>
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>
            )}

            {/* Empty State */}
            {responses.length === 0 && !isLoading && (
              <div className="text-center py-16">
                <div className="text-slate-600 mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                  <Icons.Brain />
                </div>
                <h3 className="text-xl font-semibold text-slate-400 mb-2">Ready for Multi-Perspective Analysis</h3>
                <p className="text-slate-500 max-w-md mx-auto">
                  Enter your question above and select which expert models to consult.
                  Each model brings specialized knowledge from its domain.
                </p>
              </div>
            )}
          </main>

          {/* Footer */}
          <footer className="border-t border-slate-800 py-6 mt-12">
            <div className="max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm">
              <p>Systems Architect Console - Powered by 19 Ollama Models</p>
              <p className="text-xs mt-1">Technical | Wealth | Tax/Legal | Personal Development | Meta-Synthesis</p>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
